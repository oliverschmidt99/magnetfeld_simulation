<!DOCTYPE html>
{% extends "base.html" %}
{% block title %}Bibliothek & Stammdaten{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/library.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/editor.css') }}">
{% endblock %}
{% block content %}
<div class="container">
    <div class="sub-nav-bar">
        <h2>Datenverwaltung</h2>
    </div>
    <div class="tabs">
        <button type="button" class="tab-link active" onclick="openTab(event, 'components')">Bauteil-Bibliothek
            (JSON)</button>
        <button type="button" class="tab-link" onclick="openTab(event, 'master-data')">Stammdaten (CSV)</button>
    </div>

    <div id="components" class="tab-content active">
        <div id="editor-container">
            <div class="filter-bar">
                <div class="form-group">
                    <label for="component-type-filter">Bauteiltyp</label>
                    <select id="component-type-filter">
                        <option value="all">Alle Typen</option>
                        <option value="transformers">Wandler</option>
                        <option value="copperRails">Kupferschienen</option>
                        <option value="transformerSheets">Abschirmbleche</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="search-filter">Suche nach Name</label>
                    <input type="text" id="search-filter" placeholder="z.B. CELSA_ALO...">
                </div>
                <div class="form-group">
                    <button type="button" id="add-new-component-btn" class="button">Neues Bauteil</button>
                </div>
            </div>

            <div id="component-list-accordion">
            </div>

            <div id="component-editor-modal" class="modal-overlay" style="display: none;">
                <div class="modal-content">
                    <h2 id="editor-title">Bauteil bearbeiten</h2>
                    <div class="editor-layout">
                        <form id="component-editor-form" class="component-form">
                            <button type="submit" style="display: none;" aria-hidden="true"></button>
                        </form>
                        <div class="component-preview-container">
                            <h3>Vorschau</h3>
                            <div class="component-preview">
                                <svg id="editor-preview-svg"></svg>
                            </div>
                        </div>
                    </div>
                    <div class="button-group">
                        <button type="button" id="save-component-btn" class="button">Speichern</button>
                        <button type="button" id="delete-component-btn" class="button danger">Löschen</button>
                        <button type="button" id="cancel-edit-btn" class="button secondary">Abbrechen</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="tag-selection-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h2>Tags auswählen</h2>
                <div class="search-container">
                    <input type="text" id="tag-search-input" placeholder="Tag suchen...">
                </div>
                <div id="modal-tag-list">
                </div>
                <div class="button-group">
                    <button type="button" id="save-tags-btn" class="button">Übernehmen</button>
                    <button type="button" id="cancel-tags-btn" class="button secondary">Abbrechen</button>
                </div>
            </div>
        </div>
    </div>

    <div id="master-data" class="tab-content">
        <h3>Stammdaten-Editor (CSV-Dateien)</h3>
        <p>Platzhalter: Der Editor für die CSV-Stammdaten wird hier geladen.</p>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='js/tags.js') }}"></script>
<script src="{{ url_for('static', filename='js/preview.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
<script src="{{ url_for('static', filename='js/library.js') }}"></script>
{% endblock %}
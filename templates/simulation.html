<!DOCTYPE html>
{% extends "base.html" %}

{% block title %}Simulation{% endblock %}

{% block sub_nav %}
<div class="sub-nav-bar">
    <h2>Neue Simulation durchführen (5 Schritte)</h2>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <div id="simulation-wizard">
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step-item active" data-step="1">1. Startpositionen</div>
            <div class="step-item" data-step="2">2. Spielraum</div>
            <div class="step-item" data-step="3">3. Bewegungen</div>
            <div class="step-item" data-step="4">4. Schrittweiten</div>
            <div class="step-item" data-step="5">5. Wandler</div>
        </div>

        <!-- Step 1: Startpositionen -->
        <div class="step-content active" data-step="1">
            <h3>Schritt 1: Startpositionen</h3>
            <p>Konfigurieren Sie die Startpositionen für die Simulation. Die Daten können per Drag & Drop sortiert werden.</p>
            <div id="csv-table-1" class="editable-csv-table"></div>
            <div class="button-group">
                <button class="nav-btn next-btn" data-next="2">Weiter &raquo;</button>
            </div>
        </div>

        <!-- Step 2: Spielraum -->
        <div class="step-content" data-step="2">
            <h3>Schritt 2: Spielraum</h3>
            <p>Definieren Sie den Spielraum für die verschiedenen Stromstärken.</p>
            <div id="csv-table-2" class="editable-csv-table"></div>
            <div class="button-group">
                <button class="nav-btn prev-btn" data-prev="1">&laquo; Zurück</button>
                <button class="nav-btn next-btn" data-next="3">Weiter &raquo;</button>
            </div>
        </div>

        <!-- Step 3: Bewegungen -->
        <div class="step-content" data-step="3">
            <h3>Schritt 3: Bewegungen</h3>
            <p>Legen Sie die Bewegungsabläufe für die Simulation fest.</p>
            <div id="csv-table-3" class="editable-csv-table"></div>
            <div class="button-group">
                <button class="nav-btn prev-btn" data-prev="2">&laquo; Zurück</button>
                <button class="nav-btn next-btn" data-next="4">Weiter &raquo;</button>
            </div>
        </div>

        <!-- Step 4: Schrittweiten -->
        <div class="step-content" data-step="4">
            <h3>Schritt 4: Schrittweiten</h3>
            <p>Bestimmen Sie die Schrittweiten für die Bewegungen.</p>
            <div id="csv-table-4" class="editable-csv-table"></div>
            <div class="button-group">
                <button class="nav-btn prev-btn" data-prev="3">&laquo; Zurück</button>
                <button class="nav-btn next-btn" data-next="5">Weiter &raquo;</button>
            </div>
        </div>

        <!-- Step 5: Wandler Abmessungen -->
        <div class="step-content" data-step="5">
            <h3>Schritt 5: Wandler-Abmessungen & Simulation starten</h3>
            <p>Überprüfen Sie die Abmessungen des Wandlers und starten Sie die Simulation.</p>
            <div id="csv-table-5" class="editable-csv-table"></div>
            <div class="button-group">
                <button class="nav-btn prev-btn" data-prev="4">&laquo; Zurück</button>
                <button id="start-simulation-btn" class="btn-primary">Simulation starten</button>
            </div>

            <!-- Simulation Progress -->
            <div id="simulation-progress" style="display: none; margin-top: 1.5rem;">
                <h4>Simulationsfortschritt:</h4>
                <div class="progress">
                    <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                </div>
                <div id="simulation-status-text" style="margin-top: 0.5rem;"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="{{ url_for('static', filename='js/simulation.js') }}"></script>
{% endblock %}